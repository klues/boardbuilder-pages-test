(self.webpackChunkboardbuilder=self.webpackChunkboardbuilder||[]).push([[938],{40994:function(e,t,a){"use strict";a.d(t,{oG:function(){return Z},p9:function(){return y}});var o=a(19861),i=a(35366),n=a(31041),r=a(87064),c=a(26136),l=a(27853),d=a(97388);const s=["input"],b=function(e){return{enterDuration:e}},u=["*"],p=new i.OlP("mat-checkbox-default-options",{providedIn:"root",factory:h});function h(){return{color:"accent",clickAction:"check-indeterminate"}}let m=0;const g=h(),f={provide:n.JU,useExisting:(0,i.Gpc)(()=>Z),multi:!0};class x{}class k{constructor(e){this._elementRef=e}}const v=(0,r.sb)((0,r.pj)((0,r.Kr)((0,r.Id)(k))));let Z=(()=>{class e extends v{constructor(e,t,a,o,n,r,c){super(e),this._changeDetectorRef=t,this._focusMonitor=a,this._ngZone=o,this._animationMode=r,this._options=c,this.ariaLabel="",this.ariaLabelledby=null,this._uniqueId="mat-checkbox-"+ ++m,this.id=this._uniqueId,this.labelPosition="after",this.name=null,this.change=new i.vpe,this.indeterminateChange=new i.vpe,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||g,this.color=this.defaultColor=this._options.color||g.color,this.tabIndex=parseInt(n)||0}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(e){this._required=(0,o.Ig)(e)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e||Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}),this._syncIndeterminate(this._indeterminate)}ngAfterViewChecked(){}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}get checked(){return this._checked}set checked(e){e!=this.checked&&(this._checked=e,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){const t=(0,o.Ig)(e);t!==this.disabled&&(this._disabled=t,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(e){const t=e!=this._indeterminate;this._indeterminate=(0,o.Ig)(e),t&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(e){let t=this._currentCheckState,a=this._elementRef.nativeElement;if(t!==e&&(this._currentAnimationClass.length>0&&a.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(t,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){a.classList.add(this._currentAnimationClass);const e=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{a.classList.remove(e)},1e3)})}}_emitChangeEvent(){const e=new x;e.source=this,e.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(e),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked}_onInputClick(e){var t;const a=null===(t=this._options)||void 0===t?void 0:t.clickAction;e.stopPropagation(),this.disabled||"noop"===a?this.disabled||"noop"!==a||(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==a&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this.toggle(),this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}focus(e,t){e?this._focusMonitor.focusVia(this._inputElement,e,t):this._inputElement.nativeElement.focus(t)}_onInteractionEvent(e){e.stopPropagation()}_getAnimationClassForCheckStateTransition(e,t){if("NoopAnimations"===this._animationMode)return"";let a="";switch(e){case 0:if(1===t)a="unchecked-checked";else{if(3!=t)return"";a="unchecked-indeterminate"}break;case 2:a=1===t?"unchecked-checked":"unchecked-indeterminate";break;case 1:a=2===t?"checked-unchecked":"checked-indeterminate";break;case 3:a=1===t?"indeterminate-checked":"indeterminate-unchecked"}return`mat-checkbox-anim-${a}`}_syncIndeterminate(e){const t=this._inputElement;t&&(t.nativeElement.indeterminate=e)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(d.tE),i.Y36(i.R0b),i.$8M("tabindex"),i.Y36(c.Qb,8),i.Y36(p,8))},e.\u0275cmp=i.Xpm({type:e,selectors:[["mat-checkbox"]],viewQuery:function(e,t){if(1&e&&(i.Gf(s,5),i.Gf(r.wG,5)),2&e){let e;i.iGM(e=i.CRH())&&(t._inputElement=e.first),i.iGM(e=i.CRH())&&(t.ripple=e.first)}},hostAttrs:[1,"mat-checkbox"],hostVars:12,hostBindings:function(e,t){2&e&&(i.Ikx("id",t.id),i.uIk("tabindex",null),i.ekj("mat-checkbox-indeterminate",t.indeterminate)("mat-checkbox-checked",t.checked)("mat-checkbox-disabled",t.disabled)("mat-checkbox-label-before","before"==t.labelPosition)("_mat-animation-noopable","NoopAnimations"===t._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",labelPosition:"labelPosition",name:"name",required:"required",checked:"checked",disabled:"disabled",indeterminate:"indeterminate",ariaDescribedby:["aria-describedby","ariaDescribedby"],value:"value"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[i._Bn([f]),i.qOj],ngContentSelectors:u,decls:17,vars:21,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24",0,"xml","space","preserve",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(e,t){if(1&e&&(i.F$t(),i.TgZ(0,"label",0,1),i.TgZ(2,"span",2),i.TgZ(3,"input",3,4),i.NdJ("change",function(e){return t._onInteractionEvent(e)})("click",function(e){return t._onInputClick(e)}),i.qZA(),i.TgZ(5,"span",5),i._UZ(6,"span",6),i.qZA(),i._UZ(7,"span",7),i.TgZ(8,"span",8),i.O4$(),i.TgZ(9,"svg",9),i._UZ(10,"path",10),i.qZA(),i.kcU(),i._UZ(11,"span",11),i.qZA(),i.qZA(),i.TgZ(12,"span",12,13),i.NdJ("cdkObserveContent",function(){return t._onLabelTextChange()}),i.TgZ(14,"span",14),i._uU(15,"\xa0"),i.qZA(),i.Hsn(16),i.qZA(),i.qZA()),2&e){const e=i.MAs(1),a=i.MAs(13);i.uIk("for",t.inputId),i.xp6(2),i.ekj("mat-checkbox-inner-container-no-side-margin",!a.textContent||!a.textContent.trim()),i.xp6(1),i.Q6J("id",t.inputId)("required",t.required)("checked",t.checked)("disabled",t.disabled)("tabIndex",t.tabIndex),i.uIk("value",t.value)("name",t.name)("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby)("aria-checked",t._getAriaChecked())("aria-describedby",t.ariaDescribedby),i.xp6(2),i.Q6J("matRippleTrigger",e)("matRippleDisabled",t._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",i.VKq(19,b,"NoopAnimations"===t._animationMode?0:150))}},directives:[r.wG,l.wD],styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:transparent}._mat-animation-noopable.mat-checkbox{transition:none;animation:none}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-ripple{outline:solid 3px}.mat-checkbox-layout{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}\n"],encapsulation:2,changeDetection:0}),e})(),C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({}),e})(),y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[r.si,r.BQ,l.Q8,C],r.BQ,C]}),e})()},18938:function(e,t,a){"use strict";a.r(t),a.d(t,{BuilderModule:function(){return At},routes:function(){return St}});var o=a(61116),i=a(91550),n=a(73291),r=a(12762),c=a(82051),l=a(92935),d=a(35366),s=a(91286),b=a(69244),u=a(35965),p=a(84369),h=a(79418),m=a(77307),g=a(87672);const f=["uploadInput"];function x(e,t){1&e&&(d.TgZ(0,"p"),d.SDv(1,20),d.qZA())}function k(e,t){1&e&&(d.TgZ(0,"p"),d.TgZ(1,"em"),d.SDv(2,21),d.qZA(),d.qZA())}function v(e,t){1&e&&d._UZ(0,"mat-spinner",22)}function Z(e,t){1&e&&(d.ynx(0),d.SDv(1,24),d.BQk())}function C(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"button",23),d.NdJ("click",function(){return d.CHM(e),d.oxw(),d.MAs(24).click()}),d._uU(1),d.YNc(2,Z,2,0,"ng-container",7),d.qZA()}if(2&e){const e=d.oxw();d.xp6(1),d.hij(" ",e.filename," "),d.xp6(1),d.Q6J("ngIf",!e.filename)}}function y(e,t){if(1&e&&(d.TgZ(0,"p",25),d.SDv(1,26),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.pQV(e.previewBoard.cells.length)(e.previewBoard.cells.length),d.QtT(1)}}function _(e,t){1&e&&(d.TgZ(0,"p",25),d.SDv(1,27),d.qZA())}var w=function(e){return e.Idle="Idle",e.FileInvalid="FileInvalid",e.Uploading="Uploading",e.UploadError="UploadError",e}({});let T=(()=>{class e{constructor(e,t,a){this.dialogRef=e,this.data=t,this.boardService=a,this.state=w.Idle}ngOnInit(){this.reader=new FileReader,this.reader.onload=e=>{try{this.previewBoard=new i.$,this.obfBody=JSON.parse(String(this.reader.result)),this.previewBoard.fromObf(this.obfBody)}catch(t){this.previewBoard=null,this.state=w.FileInvalid}}}fileChanged(e){this.state=w.Idle,1===e.files.length&&(this.filename=e.files[0].name,this.reader.readAsText(e.files[0]))}uploadBoard(){this.state=w.Uploading,this.boardService.addFromObf(this.obfBody,this.data.boardSet).subscribe(e=>{this.dialogRef.close(e)},e=>{this.state=w.UploadError,console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(l.so),d.Y36(l.WI),d.Y36(s.$))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-obf-upload-dialog"]],viewQuery:function(e,t){if(1&e&&d.Gf(f,5),2&e){let e;d.iGM(e=d.CRH())&&(t.uploadInput=e.first)}},inputs:{boardSet:"boardSet"},decls:25,vars:9,consts:function(){let e,t,a,o,i,n,r,c,l,s;return e="Ajouter le planche de L\u2019OBF",t="Ajoutez une nouvelle carte en important un fichier OBF (Open Board Format).",a="Annuler",o="Ajouter une carte",i="S\xE9lectionnez un fichier OBF pour commencer.",n="T\xE9l\xE9chargement\u2026",r="S\xE9lectionnez OBF\u2026",c="{VAR_PLURAL, pluriel, =1 {cellule} autres {cellules}}",c=d.Zx4(c,{VAR_PLURAL:"\ufffd1\ufffd"}),l="Nous avons trouv\xE9 " + "\ufffd0\ufffd" + " " + c + " dans votre fichier OBF. ",s="Le fichier que vous avez fourni n\u2019est pas un fichier OBF valide.",[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragBoundary","body"],["fxLayout","row","fxLayoutAlign","space-between center",1,"mb-3"],["mat-dialog-title","",1,"mb-0"],e,["mat-icon-button","","aria-label","Close","appStopPropagation","",3,"mat-dialog-close"],["mat-dialog-content","",1,"text-center"],t,[4,"ngIf"],["fxLayout","row","fxLayoutAlign","center none"],["diameter","24","style","margin: 0 auto",4,"ngIf"],["mat-stroked-button","","appStopPropagation","",3,"click",4,"ngIf"],["role","alert",4,"ngIf"],["mat-dialog-actions",""],["mat-stroked-button","","color","primary","appStopPropagation","",3,"mat-dialog-close"],a,[1,"spacer"],["mat-raised-button","","color","primary","appStopPropagation","",3,"disabled","click"],o,["type","file","accept",".obf",2,"display","none",3,"change"],["uploadInput",""],i,n,["diameter","24",2,"margin","0 auto"],["mat-stroked-button","","appStopPropagation","",3,"click"],r,["role","alert"],l,s]},template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"header",1),d.TgZ(2,"h1",2),d.SDv(3,3),d.qZA(),d.TgZ(4,"button",4),d.TgZ(5,"mat-icon"),d._uU(6,"close"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(7,"div",5),d.TgZ(8,"p"),d.SDv(9,6),d.qZA(),d.YNc(10,x,2,0,"p",7),d.YNc(11,k,3,0,"p",7),d.TgZ(12,"div",8),d.YNc(13,v,1,0,"mat-spinner",9),d.YNc(14,C,3,2,"button",10),d.qZA(),d.YNc(15,y,2,2,"p",11),d.YNc(16,_,2,0,"p",11),d.qZA(),d.TgZ(17,"div",12),d.TgZ(18,"button",13),d.SDv(19,14),d.qZA(),d._UZ(20,"span",15),d.TgZ(21,"button",16),d.NdJ("click",function(){return t.uploadBoard()}),d.SDv(22,17),d.qZA(),d.qZA(),d.TgZ(23,"input",18,19),d.NdJ("change",function(e){return t.fileChanged(e.target)}),d.qZA(),d.qZA()),2&e&&(d.xp6(4),d.Q6J("mat-dialog-close",!1),d.xp6(6),d.Q6J("ngIf","Uploading"!==t.state),d.xp6(1),d.Q6J("ngIf","Uploading"===t.state),d.xp6(2),d.Q6J("ngIf","Uploading"===t.state),d.xp6(1),d.Q6J("ngIf","Uploading"!==t.state),d.xp6(1),d.Q6J("ngIf",t.previewBoard),d.xp6(1),d.Q6J("ngIf","FileInvalid"===t.state),d.xp6(2),d.Q6J("mat-dialog-close",!1),d.xp6(3),d.Q6J("disabled",!t.previewBoard||"Uploading"===t.state))},directives:[b.Zt,u.xw,u.Wh,l.uh,p.lW,h._,l.ZT,m.Hw,l.xY,o.O5,l.H8,g.$g],styles:[""]}),e})();var S=a(74703);function A(e,t){1&e&&(d.ynx(0),d.SDv(1,9),d.BQk())}function B(e,t){1&e&&(d.ynx(0),d.SDv(1,10),d.BQk())}function q(e,t){if(1&e&&(d.TgZ(0,"div",11),d._UZ(1,"app-board-editor-form",12),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("board",e.data.board)}}function M(e,t){1&e&&(d.ynx(0),d.SDv(1,13),d.BQk())}function O(e,t){1&e&&(d.ynx(0),d.SDv(1,14),d.BQk())}let P=(()=>{class e{constructor(e,t){this.data=e,this.service=t,this.boardChange=new d.vpe}ngOnInit(){this.service.templates().subscribe(e=>this.templates=e)}selectTemplate(e){this.data.board.rows=e.board.rows,this.data.board.columns=e.board.columns,this.data.board.captions_position=e.board.captions_position,this.data.board.populateCells()}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(l.WI),d.Y36(s.$))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-board-editor"]],inputs:{board:"board"},outputs:{boardChange:"boardChange"},decls:14,vars:7,consts:function(){let e,t,a,o,i;return e="fermer",t="Propri\xE9t\xE9s du planche",a="Ajouter une carte",o="fait",i="Ajouter une carte",[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragBoundary","body"],["fxLayout","row","fxLayoutAlign","space-between center",1,"mb-3"],["mat-dialog-title","",1,"mb-0"],[4,"ngIf"],["mat-icon-button","","aria-label",e,"appStopPropagation","",3,"mat-dialog-close"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions",""],[1,"spacer"],["mat-raised-button","","color","primary","appStopPropagation","","cdkFocusInitial","",3,"mat-dialog-close"],t,a,["mat-dialog-content",""],[3,"board"],o,i]},template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"header",1),d.TgZ(2,"h1",2),d.YNc(3,A,2,0,"ng-container",3),d.YNc(4,B,2,0,"ng-container",3),d.qZA(),d.TgZ(5,"button",4),d.TgZ(6,"mat-icon"),d._uU(7,"close"),d.qZA(),d.qZA(),d.qZA(),d.YNc(8,q,2,1,"div",5),d.TgZ(9,"div",6),d._UZ(10,"span",7),d.TgZ(11,"button",8),d.YNc(12,M,2,0,"ng-container",3),d.YNc(13,O,2,0,"ng-container",3),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.xp6(3),d.Q6J("ngIf",null==t.data.board?null:t.data.board.persisted()),d.xp6(1),d.Q6J("ngIf",!(null!=t.data.board&&t.data.board.persisted())),d.xp6(1),d.Q6J("mat-dialog-close",!1),d.xp6(3),d.Q6J("ngIf",t.data.board),d.xp6(3),d.Q6J("mat-dialog-close",!0),d.xp6(1),d.Q6J("ngIf",null==t.data.board?null:t.data.board.persisted()),d.xp6(1),d.Q6J("ngIf",!(null!=t.data.board&&t.data.board.persisted())))},directives:[b.Zt,u.xw,u.Wh,l.uh,o.O5,p.lW,h._,l.ZT,m.Hw,l.H8,l.xY,S.q],styles:[""]}),e})();var J=a(13070),I=a(9550),Q=a(31041),N=a(13841),D=a(87064);let $=(()=>{class e{constructor(e){this.data=e,this.boardSetChange=new d.vpe}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(l.WI))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-boardset-editor-dialog"]],inputs:{boardSet:"boardSet"},outputs:{boardSetChange:"boardSetChange"},decls:28,vars:7,consts:function(){let e,t,a,o,i,n,r,c;return e="Propri\xE9t\xE9s de l\u2019ensemble de planches",t="fermer",a="titre",o="visibilit\xE9",i="priv\xE9",n="public",r="Ensembles de cartes de communication publics peuvent \xEAtre trouv\xE9s et consult\xE9s par n\u2019importe qui.",c="fait",[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragBoundary","body"],["fxLayout","row","fxLayoutAlign","space-between center",1,"mb-3"],["mat-dialog-title","",1,"mb-0"],e,["mat-icon-button","","aria-label",t,"appStopPropagation","",3,"mat-dialog-close"],["mat-dialog-content",""],[1,"w-100"],a,["matInput","","required","","placeholder","Title","maxlength","250","appStopPropagation","",3,"ngModel","ngModelChange"],["align","end"],[1,"w-100","mb-3"],o,["appStopPropagation","",3,"value","valueChange"],[3,"value"],i,n,r,["mat-dialog-actions",""],[1,"spacer"],["mat-raised-button","","color","primary","appStopPropagation","","cdkFocusInitial","",3,"mat-dialog-close"],c]},template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"header",1),d.TgZ(2,"h1",2),d.SDv(3,3),d.qZA(),d.TgZ(4,"button",4),d.TgZ(5,"mat-icon"),d._uU(6,"close"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(7,"div",5),d.TgZ(8,"mat-form-field",6),d.TgZ(9,"mat-label"),d.SDv(10,7),d.qZA(),d.TgZ(11,"input",8),d.NdJ("ngModelChange",function(e){return t.data.boardSet.title=e}),d.qZA(),d.TgZ(12,"mat-hint",9),d._uU(13),d.qZA(),d.qZA(),d.TgZ(14,"mat-form-field",10),d.TgZ(15,"mat-label"),d.SDv(16,11),d.qZA(),d.TgZ(17,"mat-select",12),d.NdJ("valueChange",function(e){return t.data.boardSet.public=e}),d.TgZ(18,"mat-option",13),d.SDv(19,14),d.qZA(),d.TgZ(20,"mat-option",13),d.SDv(21,15),d.qZA(),d.qZA(),d.TgZ(22,"mat-hint"),d.SDv(23,16),d.qZA(),d.qZA(),d.qZA(),d.TgZ(24,"div",17),d._UZ(25,"span",18),d.TgZ(26,"button",19),d.SDv(27,20),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.xp6(4),d.Q6J("mat-dialog-close",!1),d.xp6(7),d.Q6J("ngModel",t.data.boardSet.title),d.xp6(2),d.hij("",(null==t.data.boardSet.title?null:t.data.boardSet.title.length)||0,"\xa0/\xa0250"),d.xp6(4),d.Q6J("value",t.data.boardSet.public),d.xp6(1),d.Q6J("value",!1),d.xp6(2),d.Q6J("value",!0),d.xp6(6),d.Q6J("mat-dialog-close",t.data.boardSet))},directives:[b.Zt,u.xw,u.Wh,l.uh,p.lW,h._,l.ZT,m.Hw,l.xY,J.KE,J.hX,I.Nt,Q.Fj,Q.Q7,Q.nD,Q.JJ,Q.On,J.bx,N.gD,D.ey,l.H8],styles:[""]}),e})();var L=a(31225),z=a(47727),U=a(79996),E=a(93315),F=a(33464),H=a(40936);function Y(e,t){1&e&&(d.TgZ(0,"p"),d.SDv(1,12),d.qZA())}function R(e,t){if(1&e&&(d.ynx(0),d.TgZ(1,"p"),d.SDv(2,11),d.qZA(),d.YNc(3,Y,2,0,"p",4),d.BQk()),2&e){const e=d.oxw();d.xp6(3),d.Q6J("ngIf",!0===e.boardSet.readonly)}}function j(e,t){1&e&&d._UZ(0,"app-loading-notice",13)}function V(e,t){1&e&&(d.TgZ(0,"p"),d.SDv(1,14),d.qZA())}function W(e,t){if(1&e&&(d.TgZ(0,"button",15),d.SDv(1,16),d.qZA()),2&e){const e=d.oxw();d.Q6J("mat-dialog-close",!1)("disabled","Copying"===e.status)}}function G(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"button",17),d.NdJ("click",function(){return d.CHM(e),d.oxw().copyBoardSet()}),d.SDv(1,18),d.qZA()}if(2&e){const e=d.oxw();d.Q6J("disabled","Copying"===e.status)}}function X(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"button",19),d.NdJ("click",function(){return d.CHM(e),d.oxw().openCopiedBoardSet()}),d.SDv(1,20),d.qZA()}}var K=function(e){return e.Confirming="Confirming",e.Copying="Copying",e.Copied="Copied",e}({});let ee=(()=>{class e{constructor(e,t,a,o){this.dialogRef=e,this.boardSet=t,this.service=a,this.router=o,this.status=K.Confirming}copyBoardSet(){this.status=K.Copying,this.service.add(this.boardSet).subscribe(e=>{this.copiedBoardSet=e,this.status=K.Copied})}openCopiedBoardSet(){this.router.navigate(["/","boardsets",this.copiedBoardSet.id]),this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(l.so),d.Y36(l.WI),d.Y36(E.o),d.Y36(F.F0))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-copy-board-set-dialog"]],decls:12,vars:7,consts:function(){let e,t,a,o,i,n,r,c,l;return e="Copiez " + "\ufffd0\ufffd" + "",t="copie",a="Ensemble de planches",o="Copier cet ensemble de planches\u202F?",i="Vous pourrez modifier la copie.",n="Copie termin\xE9e\u202F!",r="Annuler",c="copier",l="Aller \xE0 la copie",[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragBoundary","body"],["mat-dialog-title",""],e,["mat-dialog-content",""],[4,"ngIf"],["action",t,"subject",a,4,"ngIf"],["mat-dialog-actions",""],["mat-stroked-button","","color","primary","appStopPropagation","",3,"mat-dialog-close","disabled",4,"ngIf"],[1,"spacer"],["mat-raised-button","","color","primary","appStopPropagation","",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary","appStopPropagation","",3,"click",4,"ngIf"],o,i,["action",t,"subject",a],n,["mat-stroked-button","","color","primary","appStopPropagation","",3,"mat-dialog-close","disabled"],r,["mat-raised-button","","color","primary","appStopPropagation","",3,"disabled","click"],c,["mat-raised-button","","color","primary","appStopPropagation","",3,"click"],l]},template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"h1",1),d.SDv(2,2),d.qZA(),d.TgZ(3,"div",3),d.YNc(4,R,4,1,"ng-container",4),d.YNc(5,j,1,0,"app-loading-notice",5),d.YNc(6,V,2,0,"p",4),d.qZA(),d.TgZ(7,"div",6),d.YNc(8,W,2,2,"button",7),d._UZ(9,"span",8),d.YNc(10,G,2,1,"button",9),d.YNc(11,X,2,0,"button",10),d.qZA(),d.qZA()),2&e&&(d.xp6(2),d.pQV(t.boardSet.name),d.QtT(2),d.xp6(2),d.Q6J("ngIf","Confirming"===t.status),d.xp6(1),d.Q6J("ngIf","Copying"===t.status),d.xp6(1),d.Q6J("ngIf","Copied"===t.status),d.xp6(2),d.Q6J("ngIf","Copied"!=t.status),d.xp6(2),d.Q6J("ngIf","Copied"!=t.status),d.xp6(1),d.Q6J("ngIf","Copied"===t.status))},directives:[b.Zt,l.uh,l.xY,o.O5,l.H8,H.W,p.lW,h._,l.ZT],styles:[""]}),e})();var te=a(39084),ae=a(23759),oe=a(85078),ie=a(97070),ne=a(24311),re=a(36278);const ce=["matTree"],le=function(e){return{board:e}};function de(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"mat-tree-node",6),d.TgZ(1,"mat-list-item",7),d.NdJ("click",function(){const t=d.CHM(e).$implicit;return d.oxw().selectBoard(t.board)})("dblclick",function(){const t=d.CHM(e).$implicit;return d.oxw().edit(t.board)})("keyup.enter",function(){const t=d.CHM(e).$implicit;return d.oxw().selectBoard(t.board)}),d.TgZ(2,"div",8),d.TgZ(3,"span"),d._uU(4),d.qZA(),d.TgZ(5,"button",9),d.NdJ("click",function(e){return e.stopPropagation()}),d.TgZ(6,"mat-icon"),d._uU(7,"more_vert"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=t.$implicit,a=d.oxw(),o=d.MAs(6);d.Q6J("matTreeNodePaddingIndent",a.treeNodePadding),d.xp6(1),d.ekj("selected",a.selectedBoard===e.board),d.xp6(3),d.Oqu(e.board.name),d.xp6(1),d.Q6J("matMenuTriggerFor",o)("matMenuTriggerData",d.VKq(6,le,e.board))}}function se(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"mat-tree-node",10),d.NdJ("click",function(){const t=d.CHM(e).$implicit;return d.oxw().selectBoard(t.board)}),d.TgZ(1,"mat-list-item",7),d.NdJ("click",function(){const t=d.CHM(e).$implicit;return d.oxw().selectBoard(t.board)})("dblclick",function(){const t=d.CHM(e).$implicit;return d.oxw().edit(t.board)})("keyup.enter",function(){const t=d.CHM(e).$implicit;return d.oxw().selectBoard(t.board)}),d.TgZ(2,"div",11),d.TgZ(3,"button",12),d.TgZ(4,"mat-icon",13),d._uU(5),d.qZA(),d.qZA(),d.TgZ(6,"span",14),d._uU(7),d.qZA(),d.TgZ(8,"button",15),d.NdJ("click",function(e){return e.stopPropagation()}),d.TgZ(9,"mat-icon"),d._uU(10,"more_vert"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=t.$implicit,a=d.oxw(),o=d.MAs(6);d.Q6J("matTreeNodePaddingIndent",a.treeNodePadding),d.xp6(1),d.ekj("selected",a.selectedBoard===e.board),d.uIk("aria-label","select "+e.board.name),d.xp6(2),d.uIk("aria-label","expand "+e.board.name),d.xp6(2),d.hij(" ",a.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),d.xp6(2),d.Oqu(e.board.name),d.xp6(1),d.Q6J("matMenuTriggerFor",o)("matMenuTriggerData",d.VKq(9,le,e.board))}}function be(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"button",16),d.NdJ("click",function(){const t=d.CHM(e).board;return d.oxw().download(t)}),d.TgZ(1,"mat-icon"),d._uU(2,"save_alt"),d.qZA(),d.ynx(3),d.SDv(4,17),d.BQk(),d.qZA(),d.TgZ(5,"button",16),d.NdJ("click",function(){const t=d.CHM(e).board;return d.oxw().pdf(t)}),d.TgZ(6,"mat-icon"),d._uU(7,"picture_as_pdf"),d.qZA(),d.ynx(8),d.SDv(9,18),d.BQk(),d.qZA(),d._UZ(10,"mat-divider"),d.TgZ(11,"button",19),d.NdJ("click",function(){const t=d.CHM(e).board;return d.oxw().delete(t)}),d.TgZ(12,"mat-icon"),d._uU(13,"delete"),d.qZA(),d.ynx(14),d.SDv(15,20),d.BQk(),d.qZA(),d.TgZ(16,"button",19),d.NdJ("click",function(){const t=d.CHM(e).board;return d.oxw().edit(t)}),d.TgZ(17,"mat-icon"),d._uU(18,"edit"),d.qZA(),d.ynx(19),d.SDv(20,21),d.BQk(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(11),d.Q6J("disabled",e.boardSet.readonly),d.xp6(5),d.Q6J("disabled",e.boardSet.readonly)}}let ue=(()=>{class e{constructor(e,t,a){this.dialog=e,this.boardService=t,this.router=a,this.selectionChange=new d.vpe,this.deleteBoard=new d.vpe,this.updateBoard=new d.vpe,this.treeNodePadding=20,this.treeControl=new ae.C2(e=>e.level,e=>e.expandable),this.treeFlattener=new te.JZ((e,t)=>{const a=e.children;return{expandable:!!a&&a.length>0,board:e.board,level:t}},e=>e.level,e=>e.expandable,e=>e.children),this.dataSource=new te.kc(this.treeControl,this.treeFlattener),this.hasChild=(e,t)=>t.expandable}ngOnChanges(e){e.boards&&this.rebuildTree()}rebuildTree(e=!0){this.dataSource.data=this.flatToHierarchy(),e&&this.treeControl.expandAll()}flatToHierarchy(){const e={},t=new Array,a=[];return this.boards.forEach(t=>{t.cells.filter(e=>null!=e.linked_board_id).forEach(e=>a.push(e.linked_board_id)),e[t.id]={board:t,children:[]}}),Object.keys(e).forEach(o=>{const i=e[o];a.includes(i.board.id)?this.boards.forEach(t=>{t.cells.find(e=>e.linked_board_id===i.board.id)&&e[t.id].children.push(i)}):t.push(i)}),t}selectBoard(e){this.selectionChange.emit(e)}delete(e){this.deleteBoard.emit(e)}edit(e){void 0===this.currentDialogRef&&(this.boardSet.readonly||(this.currentDialogRef=this.dialog.open(P,{width:"700px",data:{board:e}}),this.currentDialogRef.afterClosed().subscribe(t=>{this.currentDialogRef=void 0,this.boardService.update(e).subscribe(e=>{this.updateBoard.emit(e)})})))}download(e){(0,c.saveAs)(new Blob([JSON.stringify(e.toObf(),null,2)],{type:"text/plain;charset=utf-8"}),e.title+".obf")}pdf(e){this.router.navigate(["boardsets",e.board_set_id,"pdf",e.id])}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(l.uw),d.Y36(s.$),d.Y36(F.F0))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-board-tree"]],viewQuery:function(e,t){if(1&e&&d.Gf(ce,5),2&e){let e;d.iGM(e=d.CRH())&&(t.matTree=e.first)}},inputs:{boardSet:"boardSet",boards:"boards",selectedBoard:"selectedBoard"},outputs:{selectionChange:"selectionChange",deleteBoard:"deleteBoard",updateBoard:"updateBoard"},features:[d.TTD],decls:8,vars:3,consts:function(){let e,t,a,o,i;return e="Mesures prises par le Conseil",t="T\xE9l\xE9charger en tant qu\u2019OBF",a="T\xE9l\xE9charger/Imprimer le PDF",o="supprimer",i="Propri\xE9t\xE9s",[[3,"dataSource","treeControl"],["matTree",""],["matTreeNodePadding","",3,"matTreeNodePaddingIndent",4,"matTreeNodeDef"],["matTreeNodePadding","",3,"matTreeNodePaddingIndent","click",4,"matTreeNodeDef","matTreeNodeDefWhen"],["boardMenu","matMenu"],["matMenuContent",""],["matTreeNodePadding","",3,"matTreeNodePaddingIndent"],["tabindex","0",3,"click","dblclick","keyup.enter"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100",2,"padding-left","40px"],["mat-button","","mat-icon-button","","matTooltip","Board Actions","matTooltipPosition","right","appStopPropagation","",3,"matMenuTriggerFor","matMenuTriggerData","click"],["matTreeNodePadding","",3,"matTreeNodePaddingIndent","click"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["mat-icon-button","","matTreeNodeToggle","","appStopPropagation",""],[1,"mat-icon-rtl-mirror"],["fxFlex","grow"],["mat-button","","mat-icon-button","","matTooltip",e,"matTooltipPosition","right","appStopPropagation","",3,"matMenuTriggerFor","matMenuTriggerData","click"],["mat-menu-item","",3,"click"],t,a,["mat-menu-item","",3,"disabled","click"],o,i]},template:function(e,t){1&e&&(d.TgZ(0,"mat-nav-list"),d.TgZ(1,"mat-tree",0,1),d.YNc(3,de,8,8,"mat-tree-node",2),d.YNc(4,se,11,11,"mat-tree-node",3),d.qZA(),d.qZA(),d.TgZ(5,"mat-menu",null,4),d.YNc(7,be,21,2,"ng-template",5),d.qZA()),2&e&&(d.xp6(1),d.Q6J("dataSource",t.dataSource)("treeControl",t.treeControl),d.xp6(3),d.Q6J("matTreeNodeDefWhen",t.hasChild))},directives:[oe.Hk,te.gi,te.fQ,ie.VK,ie.KA,te.uo,te.ah,oe.Tg,u.xw,u.Wh,p.lW,ne.gM,h._,ie.p6,m.Hw,te.eu,u.yH,ie.OP,re.d],styles:["mat-list-item[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;user-select:none}mat-list-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;overflow:hidden}mat-list-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{opacity:.4}mat-list-item[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%], mat-list-item[_ngcontent-%COMP%]   button[aria-expanded=true][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{opacity:1}mat-list-item.selected[_ngcontent-%COMP%], mat-list-item.selected[_ngcontent-%COMP%]:focus, mat-list-item.selected[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.2)!important}"]}),e})();var pe=a(55683),he=a(529),me=a(47133),ge=a(42693);let fe=(()=>{class e{constructor(e){this.http=e,this.apiEndpoint=`${he.N.boardBuilderApiBase}/cells`}list(){return this.http.get(this.apiEndpoint).pipe((0,U.U)(e=>e.map(e=>(new me.b).deserialise(e))))}get(e,t=""){return this.http.get(`${this.apiEndpoint}/${e}`,{params:{expand:t}}).pipe((0,U.U)(e=>(new me.b).deserialise(e)))}update(e){return this.http.patch(`${this.apiEndpoint}/${e.id}`,e).pipe((0,U.U)(e=>(new me.b).deserialise(e)))}}return e.\u0275fac=function(t){return new(t||e)(d.LFG(ge.eN))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var xe=a(73501),ke=a(88006),ve=a(57173),Ze=a(6489),Ce=a(76710);function ye(e,t){if(1&e&&(d.TgZ(0,"mat-icon"),d._uU(1,"lens"),d.qZA()),2&e){const e=d.oxw();d.Udp("color",e.value)}}function _e(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"button",7),d.DtL(1,8),d.NdJ("click",function(t){return d.CHM(e),d.oxw().selectColour(null),t.stopPropagation()}),d.TgZ(2,"mat-icon",9),d._uU(3,"format_color_reset"),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.pQV(e.label),d.QtT(1)}}let we=(()=>{class e{constructor(){this.palette="regular",this.icon="color_lens",this.valueChange=new d.vpe}ngOnInit(){this.colours=pe.z[this.palette]}ngOnChanges(){this.value||(this.value="transparent")}selectColour(e){"transparent"!==e&&this.valueChange.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-cell-editor-colour-panel"]],viewQuery:function(e,t){if(1&e&&d.Gf(Ze.ib,5),2&e){let e;d.iGM(e=d.CRH())&&(t.expansionPanel=e.first)}},inputs:{palette:"palette",icon:"icon",label:"label",width:"width",value:"value"},outputs:{valueChange:"valueChange"},features:[d.TTD],decls:10,vars:7,consts:function(){let e;return e="Supprimer " + "\ufffd0\ufffd" + " Colour",[["hideToggle","",1,"colour-selector"],["fxLayoutAlign","space-between center"],[1,"mr-2"],["fxLayoutAlign","end center"],[3,"color",4,"ngIf"],["mat-icon-button","","matTooltipPosition","left",3,"matTooltip","click",4,"ngIf"],[3,"border","value","palette","valueChange"],["mat-icon-button","","matTooltipPosition","left",3,"click",6,"matTooltip"],["matTooltip",e],["color","primary"]]},template:function(e,t){1&e&&(d.TgZ(0,"mat-expansion-panel",0),d.TgZ(1,"mat-expansion-panel-header",1),d.TgZ(2,"mat-panel-title"),d.TgZ(3,"mat-icon",2),d._uU(4),d.qZA(),d._uU(5),d.qZA(),d.TgZ(6,"div",3),d.YNc(7,ye,2,2,"mat-icon",4),d.YNc(8,_e,4,1,"button",5),d.qZA(),d.qZA(),d.TgZ(9,"app-colour-picker",6),d.NdJ("valueChange",function(e){return t.selectColour(e)}),d.qZA(),d.qZA()),2&e&&(d.xp6(4),d.Oqu(t.icon),d.xp6(1),d.hij(" ",t.label," "),d.xp6(2),d.Q6J("ngIf",t.value),d.xp6(1),d.Q6J("ngIf","transparent"!==t.value),d.xp6(1),d.Q6J("border",!1)("value",t.value)("palette",t.palette))},directives:[Ze.ib,Ze.yz,u.Wh,Ze.yK,m.Hw,o.O5,Ce.a,p.lW,ne.gM],styles:["mat-panel-title[_ngcontent-%COMP%]{align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%], .example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{flex-basis:0}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.colour-grid[_ngcontent-%COMP%]{flex-flow:row wrap}mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 12px}  .colour-selector .mat-expansion-panel-body{padding:0 10px 10px!important}  .custom-accordion.mat-accordion .expansion-panel-wrapper:first-of-type .mat-expansion-panel{border-top-right-radius:4px;border-top-left-radius:4px}  .custom-accordion.mat-accordion>:not(.expanded) .mat-expansion-panel{border-radius:0}  .custom-accordion.mat-accordion>.expansion-panel-wrapper:last-of-type>.mat-expansion-panel{border-bottom-right-radius:4px;border-bottom-left-radius:4px}"]}),e})();var Te=a(42861),Se=a(50098),Ae=a(22797);const Be=["searchPanel"];function qe(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",2),d.TgZ(1,"div",3),d.TgZ(2,"mat-form-field",4),d.TgZ(3,"input",5,6),d.NdJ("ngModelChange",function(t){return d.CHM(e),d.oxw().cell.caption=t}),d.qZA(),d.TgZ(5,"mat-hint",7),d._uU(6),d.qZA(),d.qZA(),d.TgZ(7,"button",8),d.NdJ("click",function(){return d.CHM(e),d.oxw().closeEditor()}),d.TgZ(8,"mat-icon"),d._uU(9,"check"),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(2),d.Q6J("floatLabel","never"),d.xp6(1),d.Q6J("ngModel",e.cell.caption),d.xp6(3),d.hij("",(null==e.cell.caption?null:e.cell.caption.length)||0,"\xa0/\xa0250")}}function Me(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"app-cell-editor-colour-panel",41),d.NdJ("valueChange",function(t){return d.CHM(e),d.oxw(2).cell.hair_colour=t})("valueChange",function(){return d.CHM(e),d.oxw(2).saveCell()}),d.qZA()}if(2&e){const e=d.oxw(2);d.Q6J("value",e.cell.hair_colour)}}function Oe(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"app-cell-editor-colour-panel",42),d.NdJ("valueChange",function(t){return d.CHM(e),d.oxw(2).cell.skin_colour=t})("valueChange",function(){return d.CHM(e),d.oxw(2).saveCell()}),d.qZA()}if(2&e){const e=d.oxw(2);d.Q6J("value",e.cell.skin_colour)}}function Pe(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",43),d.TgZ(1,"mat-card",44),d.ynx(2),d.SDv(3,45),d.BQk(),d._uU(4),d.TgZ(5,"button",46),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).unlinkCellFromBoard()}),d.TgZ(6,"mat-icon"),d._uU(7,"close"),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=d.oxw(2);d.xp6(4),d.hij(" ",e.linkedBoard?e.linkedBoard.name:e.cell.linked_board_id," ")}}function Je(e,t){if(1&e&&(d.TgZ(0,"mat-option",54),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.Q6J("value",e.id),d.xp6(1),d.Oqu(e.name)}}function Ie(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"mat-form-field",49),d.TgZ(2,"mat-label"),d.SDv(3,50),d.qZA(),d.TgZ(4,"mat-select",51),d.NdJ("selectionChange",function(){return d.CHM(e),d.oxw(4).afterCellLinkedToBoard()})("ngModelChange",function(t){return d.CHM(e),d.oxw(4).cell.linked_board_id=t}),d.YNc(5,Je,2,2,"mat-option",52),d.qZA(),d.TgZ(6,"mat-hint"),d.SDv(7,53),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=d.oxw().ngIf,t=d.oxw(3);d.xp6(4),d.Q6J("ngModel",t.cell.linked_board_id),d.xp6(1),d.Q6J("ngForOf",e)}}function Qe(e,t){1&e&&(d.TgZ(0,"div"),d.TgZ(1,"div",44),d.TgZ(2,"mat-icon",55),d._uU(3,"info"),d.qZA(),d.ynx(4),d.SDv(5,56),d.BQk(),d._UZ(6,"br"),d.ynx(7),d.SDv(8,57),d.BQk(),d.qZA(),d.qZA())}function Ne(e,t){if(1&e&&(d.TgZ(0,"div"),d.YNc(1,Ie,8,2,"div",22),d.YNc(2,Qe,9,0,"div",22),d.qZA()),2&e){const e=t.ngIf;d.xp6(1),d.Q6J("ngIf",e.length>0),d.xp6(1),d.Q6J("ngIf",0===e.length)}}function De(e,t){1&e&&d._UZ(0,"app-loading-notice",58),2&e&&d.Udp("padding","20px 0")}function $e(e,t){if(1&e&&(d.TgZ(0,"div"),d.YNc(1,Ne,3,2,"div",47),d.ALo(2,"async"),d.YNc(3,De,1,2,"ng-template",null,48,d.W1O),d.qZA()),2&e){const e=d.MAs(4),t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",d.lcZ(2,2,t.linkableBoards$))("ngIfElse",e)}}function Le(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"mat-tab-group",9),d.NdJ("selectedTabChange",function(t){return d.CHM(e),d.oxw().triggerSearch(t)}),d.TgZ(1,"mat-tab",10),d.TgZ(2,"div",11),d.TgZ(3,"h3",12),d.SDv(4,13),d.qZA(),d.TgZ(5,"mat-accordion",14),d.TgZ(6,"app-cell-editor-colour-panel",15),d.NdJ("valueChange",function(t){return d.CHM(e),d.oxw().cell.background_colour=t})("valueChange",function(){return d.CHM(e),d.oxw().saveCell()}),d.qZA(),d.TgZ(7,"app-cell-editor-colour-panel",16),d.NdJ("valueChange",function(t){return d.CHM(e),d.oxw().cell.border_colour=t})("valueChange",function(){return d.CHM(e),d.oxw().saveCell()}),d.qZA(),d.TgZ(8,"app-cell-editor-colour-panel",17),d.NdJ("valueChange",function(t){return d.CHM(e),d.oxw().cell.text_colour=t})("valueChange",function(){return d.CHM(e),d.oxw().saveCell()}),d.qZA(),d.YNc(9,Me,1,1,"app-cell-editor-colour-panel",18),d.YNc(10,Oe,1,1,"app-cell-editor-colour-panel",19),d.qZA(),d.TgZ(11,"h3"),d.SDv(12,20),d.qZA(),d.YNc(13,Pe,8,1,"div",21),d.YNc(14,$e,5,4,"div",22),d.TgZ(15,"h3"),d.SDv(16,23),d.qZA(),d.TgZ(17,"div",24),d.TgZ(18,"button",25),d.NdJ("click",function(){d.CHM(e);const t=d.oxw();return t.moveCell(t.board.cells.indexOf(t.cell)-1)}),d.TgZ(19,"div",26),d.TgZ(20,"mat-icon"),d._uU(21,"arrow_left"),d.qZA(),d.ynx(22),d.SDv(23,27),d.BQk(),d.qZA(),d.qZA(),d._uU(24,"\xa0 "),d.TgZ(25,"button",28),d.NdJ("click",function(){d.CHM(e);const t=d.oxw();return t.moveCell(t.board.cells.indexOf(t.cell)+1)}),d.TgZ(26,"div",29),d.ynx(27),d.SDv(28,30),d.BQk(),d.TgZ(29,"mat-icon"),d._uU(30,"arrow_right"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(31,"h3"),d.SDv(32,31),d.qZA(),d.TgZ(33,"button",32),d.NdJ("click",function(){return d.CHM(e),d.oxw().clearCell("symbol")}),d.ynx(34),d.SDv(35,33),d.BQk(),d.qZA(),d._uU(36,"\xa0 "),d.TgZ(37,"button",34),d.NdJ("click",function(){return d.CHM(e),d.oxw().clearCell("colours")}),d.ynx(38),d.SDv(39,35),d.BQk(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(40,"mat-tab",36),d.TgZ(41,"div",11),d.TgZ(42,"app-search-panel",37,38),d.NdJ("selectionChange",function(t){return d.CHM(e),d.oxw().selectSearchResult(t)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(44,"mat-tab",39),d.TgZ(45,"div",11),d.TgZ(46,"app-media-library",40),d.NdJ("mediaSelect",function(t){return d.CHM(e),d.oxw().selectMedia(t)}),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(6),d.Q6J("value",e.cell.background_colour),d.xp6(1),d.Q6J("value",e.cell.border_colour),d.xp6(1),d.Q6J("value",e.cell.text_colour),d.xp6(1),d.Q6J("ngIf",null==e.cell.picto?null:e.cell.picto.adaptable),d.xp6(1),d.Q6J("ngIf",null==e.cell.picto?null:e.cell.picto.adaptable),d.xp6(3),d.Q6J("ngIf",e.cell.linked_board_id),d.xp6(1),d.Q6J("ngIf",!e.cell.linked_board_id),d.xp6(4),d.Q6J("disabled",0===e.board.cells.indexOf(e.cell)),d.xp6(7),d.Q6J("disabled",e.board.cells.indexOf(e.cell)===e.board.cells.length-1),d.xp6(17),d.Q6J("initialQuery",e.cell.caption),d.xp6(4),d.Q6J("showCreate",!0)}}let ze=(()=>{class e{constructor(e,t,a,o){this.dialog=e,this.cellService=t,this.boardService=a,this.userService=o,this.closed=new d.vpe,this.cellLinkedToBoard=new d.vpe,this.userSubscription=o.user$.subscribe(e=>this.user=e),this.colourPickerColours=pe.z.regular}ngOnChanges(e){var t,a;(null===(t=e.cell)||void 0===t?void 0:t.previousValue)&&this.cellService.update(e.cell.previousValue).subscribe(),(null===(a=e.cell)||void 0===a?void 0:a.currentValue)&&(this.loadLinkableBoards(),this.loadLinkedBoard())}ngOnDestroy(){this.cell&&this.saveCell(),this.userSubscription.unsubscribe()}loadLinkableBoards(){this.linkableBoards$=this.cellService.get(this.cell.id,"linkable_boards").pipe((0,U.U)(e=>e.linkable_boards))}afterCellLinkedToBoard(){this.saveCell(e=>{this.cellLinkedToBoard.emit(!0),this.loadLinkedBoard()})}unlinkCellFromBoard(){this.cell.linked_board_id=null,this.linkedBoard=null,this.saveCell(e=>{this.cellLinkedToBoard.emit(!0),this.loadLinkableBoards()})}loadLinkedBoard(){this.cell.linked_board_id&&this.boardService.get(this.cell.linked_board_id).subscribe(e=>this.linkedBoard=e)}closeEditor(){this.closed.emit(!0)}selectSearchResult(e){var t;this.cell.media=null,this.cell.media_id=null,this.cell.image_url=e.imageUrl,this.cell.picto_id=e.pictoId,this.cell.picto=e.picto,this.user&&(null===(t=e.picto)||void 0===t?void 0:t.adaptable)&&(this.user.default_hair_colour&&(this.cell.hair_colour=this.user.default_hair_colour),this.user.default_skin_colour&&(this.cell.skin_colour=this.user.default_skin_colour)),this.saveCell()}triggerSearch(e){1===e.index&&this.cell.caption&&this.searchPanel.search()}clearCell(e){e&&"colours"!==e||(this.cell.background_colour=null,this.cell.border_colour=null,this.cell.text_colour=null,this.cell.hair_colour=null,this.cell.skin_colour=null),e&&"symbol"!==e||(this.cell.image_url=null,this.cell.media_id=null,this.cell.picto_id=null,this.cell.media=null,this.cell.picto=null,this.cell.hair_colour=null,this.cell.skin_colour=null),e&&"caption"!==e||(this.cell.caption=null),this.saveCell()}moveCell(e){(0,b.bA)(this.board.cells,this.board.cells.indexOf(this.cell),e),this.boardService.reorderCells(this.board).subscribe()}selectMedia(e){this.cell.picto_id=null,this.cell.media=e,this.cell.media_id=e.id,this.cell.image_url=e.public_url,this.saveCell()}saveCell(e){this.cellService.update(this.cell).subscribe(e)}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(l.uw),d.Y36(fe),d.Y36(s.$),d.Y36(xe.K))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-cell-editor"]],viewQuery:function(e,t){if(1&e&&d.Gf(Be,5),2&e){let e;d.iGM(e=d.CRH())&&(t.searchPanel=e.first)}},inputs:{boardSet:"boardSet",board:"board",cell:"cell"},outputs:{closed:"closed",cellLinkedToBoard:"cellLinkedToBoard"},features:[d.TTD],decls:2,vars:2,consts:function(){let e,t,a,o,i,n,r,c,l,d,s,b,u,p,h,m,g,f,x,k,v,Z,C,y,_,w,T;return e="\xE9tiquette",t="Enregistrer et fermer l\u2019\xE9diteur de cellules",a="Enregistrer et fermer",o="cellule",i="pavillon",n="arri\xE8re-plan",r="fronti\xE8re",c="SMS",l="Cheveux",d="Peau",s="encha\xEEnement",b="D\xE9placer la cellule",u="D\xE9placer plus t\xF4t",p="D\xE9placer plus tard",h="R\xE9initialiser le contenu de la cellule",m="Effacer le symbole",g="Couleurs claires",f="symbole",x="Mes images",k="Li\xE9 \xE0",v="Dissocier",Z="Dissocier",C="Lien vers un planche",y="Cette liste ne montre que des planches non reli\xE9s.",_="Aucune planche n\u2019est disponible pour la liaison.",w="D\xE9connecter un planche existant ou en cr\xE9er un nouveau.",T="Cartes pouvant \xEAtre li\xE9es",[["gaCategory","CellEditor",4,"ngIf"],["mat-align-tabs","center","gaCategory","CellEditor","fxFlex","grow",3,"selectedTabChange",4,"ngIf"],["gaCategory","CellEditor"],["fxLayout","row","fxLayoutAlign","space-between start",1,"p-1"],["appearance","outline",1,"w-100","no-label","cell-caption-form-field",3,"floatLabel"],["matInput","","placeholder",e,"autocomplete","off","maxlength","250",3,"ngModel","ngModelChange"],["cellCaptionInput",""],["align","end"],["mat-icon-button","","aria-label",t,"matTooltip",a,"matTooltipPosition","left","gaEvent","click","gaLabel","SaveAndClose",2,"margin-left","1rem","margin-top","8px",3,"click"],["mat-align-tabs","center","gaCategory","CellEditor","fxFlex","grow",3,"selectedTabChange"],["label",o],[1,"p-1"],[1,"mt-0"],i,[1,"custom-accordion"],["width","302","label",n,"icon","format_color_fill",3,"value","valueChange"],["width","302","label",r,"icon","border_color",3,"value","valueChange"],["width","302","label",c,"icon","format_color_text",3,"value","valueChange"],["width","302","label",l,"palette","hair","icon","face",3,"value","valueChange",4,"ngIf"],["width","302","label",d,"palette","skin","icon","insert_emoticon",3,"value","valueChange",4,"ngIf"],s,["class","cell-linked-notice-wrapper",4,"ngIf"],[4,"ngIf"],b,["fxLayout","row","fxLayoutAlign","space-between start"],["mat-stroked-button","","color","primary","fxFlex","50","gaEvent","click","gaLabel","MoveCellEarlier",3,"disabled","click"],["fxLayoutAlign","start center"],u,["mat-stroked-button","","color","primary","fxFlex","50","gaEvent","click","gaLabel","MoveCellLater",3,"disabled","click"],["fxLayoutAlign","end center"],p,h,["mat-stroked-button","","color","primary","gaEvent","click","gaLabel","ClearSymbol",3,"click"],m,["mat-stroked-button","","color","primary","gaEvent","click","gaLabel","ClearColours",3,"click"],g,["label",f],[3,"initialQuery","selectionChange"],["searchPanel",""],["label",x],[3,"showCreate","mediaSelect"],["width","302","label",l,"palette","hair","icon","face",3,"value","valueChange"],["width","302","label",d,"palette","skin","icon","insert_emoticon",3,"value","valueChange"],[1,"cell-linked-notice-wrapper"],["fxLayout","row","fxLayoutAlign","space-between center"],k,["mat-icon-button","","aria-label",v,"matTooltip",Z,"matTooltipPosition","left",3,"click"],[4,"ngIf","ngIfElse"],["loadingLinkableBoards",""],["appearance","outline",1,"w-100"],C,[3,"ngModel","selectionChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],y,[3,"value"],[2,"margin-right","1rem"],_,w,["diameter","49","layout","row","subject",T]]},template:function(e,t){1&e&&(d.YNc(0,qe,10,3,"div",0),d.YNc(1,Le,47,11,"mat-tab-group",1)),2&e&&(d.Q6J("ngIf",t.cell),d.xp6(1),d.Q6J("ngIf",t.cell))},directives:[o.O5,ke.ht,u.xw,u.Wh,J.KE,I.Nt,Q.Fj,Q.nD,Q.JJ,Q.On,J.bx,p.lW,ne.gM,ke.kw,m.Hw,ve.SP,u.yH,ve.uX,Ze.pp,we,Te.m,Se.Hh,Ae.a8,J.hX,N.gD,o.sg,D.ey,H.W],pipes:[o.Ov],styles:["mat-panel-description[_ngcontent-%COMP%]{flex-direction:row-reverse}.cell-linked-notice-wrapper[_ngcontent-%COMP%]{min-height:89px}  app-cell-editor mat-form-field.cell-caption-form-field .mat-form-field-wrapper{padding-bottom:0}  app-cell-editor mat-form-field.cell-caption-form-field .mat-form-field-subscript-wrapper{margin-top:1.75rem;max-height:0;opacity:0;transition:max-height .2s ease-in,opacity .2s ease-in}  app-cell-editor mat-form-field.cell-caption-form-field.mat-focused .mat-form-field-subscript-wrapper{max-height:2rem;opacity:1}  app-cell-editor .mat-tab-label,   app-cell-editor .mat-tab-label-active{min-width:118px!important}  app-cell-editor .mat-tab-body-wrapper{min-height:calc(100% - 50px)}  app-cell-editor .mat-tab-body-content{overflow-y:overlay!important}mat-tab-group[_ngcontent-%COMP%]{overflow-y:hidden}"]}),e})();var Ue=a(34546),Ee=a(98508),Fe=a(47068);let He=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-error-not-found"]],inputs:{subject:"subject"},decls:6,vars:2,consts:function(){let e,t,a;return e="" + "\ufffd0\ufffd" + " introuvable",t="Nous n\u2019avons pas pu trouver de " + "\ufffd0\ufffd" + " \xE0 cette adresse",a="boussole",[[1,"text-center"],e,[1,"lead"],t,["src","assets/not-found.svg","alt",a]]},template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"h1"),d.SDv(2,1),d.qZA(),d.TgZ(3,"p",2),d.SDv(4,3),d.qZA(),d._UZ(5,"img",4),d.qZA()),2&e&&(d.xp6(2),d.pQV(t.subject),d.QtT(2),d.xp6(2),d.pQV(t.subject),d.QtT(4))},styles:["img[_ngcontent-%COMP%]{max-height:15rem}"]}),e})();var Ye=a(10168),Re=a(52309),je=a(96055);function Ve(e,t){if(1&e&&d._UZ(0,"img",12),2&e){const e=d.oxw(3);d.Q6J("src",null==e.board.header_media?null:e.board.header_media.public_url,d.LSH)}}function We(e,t){1&e&&(d.ynx(0),d.SDv(1,13),d.BQk())}function Ge(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"button",10),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).selectHeaderImage()}),d.YNc(1,Ve,1,1,"img",11),d.YNc(2,We,2,0,"ng-container",0),d.qZA()}if(2&e){const e=d.oxw(2);d.ekj("p-0",e.board.header_media),d.xp6(1),d.Q6J("ngIf",e.board.header_media),d.xp6(1),d.Q6J("ngIf",!e.board.header_media)}}function Xe(e,t){if(1&e&&d._UZ(0,"img",12),2&e){const e=d.oxw(3);d.Q6J("src",null==e.board.header_media?null:e.board.header_media.public_url,d.LSH)}}function Ke(e,t){if(1&e&&(d.ynx(0),d.YNc(1,Xe,1,1,"img",11),d.BQk()),2&e){const e=d.oxw(2);d.xp6(1),d.Q6J("ngIf",e.board.header_media)}}function et(e,t){if(1&e&&d._UZ(0,"app-adaptable-image",25),2&e){const e=d.oxw(2).$implicit;d.Q6J("adaptable",null==e.picto?null:e.picto.adaptable)("cell",e)("image",e.image_url)}}function tt(e,t){1&e&&(d.TgZ(0,"mat-icon",26),d._uU(1,"landscape"),d.qZA())}function at(e,t){1&e&&(d.TgZ(0,"button",27),d.TgZ(1,"mat-icon"),d._uU(2,"link"),d.qZA(),d.qZA()),2&e&&d.Udp("visibility","hidden")}function ot(e,t){if(1&e&&(d.TgZ(0,"span",28),d._uU(1),d.qZA()),2&e){const e=d.oxw(2).$implicit;d.Udp("color",e.text_colour),d.xp6(1),d.Oqu(e.caption)}}function it(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"button",29),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(2).$implicit;return d.oxw(2).showBoard(t.linked_board_id)}),d.TgZ(1,"mat-icon"),d._uU(2,"link"),d.qZA(),d.qZA()}if(2&e){const e=d.oxw(2).$implicit;d.Udp("visibility",e.linked_board_id?"visible":"hidden")}}function nt(e,t){if(1&e&&(d.TgZ(0,"div",17),d.TgZ(1,"div",18),d.YNc(2,et,1,3,"app-adaptable-image",19),d.YNc(3,tt,2,0,"mat-icon",20),d.qZA(),d.TgZ(4,"div",21),d.YNc(5,at,3,2,"button",22),d.YNc(6,ot,2,3,"span",23),d.YNc(7,it,3,2,"button",24),d.qZA(),d.qZA()),2&e){const e=d.oxw().$implicit,t=d.oxw(2);d.xp6(2),d.Q6J("ngIf",e.image_url),d.xp6(1),d.Q6J("ngIf",!e.image_url),d.xp6(1),d.Q6J("fxFlexOrder","above"===t.board.captions_position?1:3),d.xp6(1),d.Q6J("ngIf",e.linked_board_id),d.xp6(1),d.Q6J("ngIf","hidden"!=t.board.captions_position),d.xp6(1),d.Q6J("ngIf",e.linked_board_id)}}function rt(e,t){if(1&e&&d._UZ(0,"img",35),2&e){const e=d.oxw(2).$implicit;d.Q6J("src",e.image_url,d.LSH)}}function ct(e,t){1&e&&(d.TgZ(0,"mat-icon",26),d._uU(1,"landscape"),d.qZA())}function lt(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",30),d.TgZ(1,"div",31),d.YNc(2,rt,1,1,"img",32),d.YNc(3,ct,2,0,"mat-icon",20),d.qZA(),d.TgZ(4,"div",33),d.TgZ(5,"button",27),d.TgZ(6,"mat-icon"),d._uU(7,"link"),d.qZA(),d.qZA(),d.TgZ(8,"div"),d._uU(9),d.qZA(),d.TgZ(10,"button",34),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw(2).showBoard(t.linked_board_id)}),d.TgZ(11,"mat-icon"),d._uU(12,"link"),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=d.oxw().$implicit,t=d.oxw(2);d.xp6(2),d.Q6J("ngIf",e.image_url),d.xp6(1),d.Q6J("ngIf",!e.image_url),d.xp6(1),d.Q6J("fxFlexOrder","right"===t.board.captions_position?3:1),d.xp6(1),d.Udp("visibility","hidden"),d.xp6(3),d.Udp("color",e.text_colour),d.xp6(1),d.Oqu(e.caption),d.xp6(1),d.Udp("visibility",e.linked_board_id?"visible":"hidden")}}function dt(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"mat-grid-tile",14),d.NdJ("click",function(){const t=d.CHM(e).$implicit;return d.oxw(2).selectCell(t)})("keyup.enter",function(){const t=d.CHM(e).$implicit;return d.oxw(2).selectCell(t)}),d.YNc(1,nt,8,6,"div",15),d.YNc(2,lt,13,10,"div",16),d.qZA()}if(2&e){const e=t.$implicit,a=d.oxw(2);d.Udp("background-color",e.background_colour)("outline-color",e.border_colour),d.ekj("selected",a.cell===e)("outlined",e.border_colour),d.xp6(1),d.Q6J("ngIf","column"===a.board.cellLayout),d.xp6(1),d.Q6J("ngIf","row"===a.board.cellLayout)}}function st(e,t){if(1&e&&(d.TgZ(0,"div"),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d.YNc(4,Ge,3,4,"button",4),d.YNc(5,Ke,2,1,"ng-container",5),d.qZA(),d.qZA(),d.TgZ(6,"h1",6),d._uU(7),d.qZA(),d.TgZ(8,"span",7),d._uU(9),d.qZA(),d.qZA(),d.TgZ(10,"mat-grid-list",8),d.YNc(11,dt,3,10,"mat-grid-tile",9),d.ALo(12,"slice"),d.qZA(),d.qZA()),2&e){const e=d.oxw();d.xp6(3),d.Q6J("ngSwitch",e.readonly),d.xp6(1),d.Q6J("ngSwitchCase",!1),d.xp6(1),d.Q6J("ngSwitchCase",!0),d.xp6(2),d.Oqu(e.board.title),d.xp6(2),d.Oqu(e.board.description),d.xp6(1),d.Q6J("cols",e.board.columns),d.xp6(1),d.Q6J("ngForOf",d.Dn7(12,7,e.board.cells,0,e.board.columns*e.board.rows))}}let bt=(()=>{class e{constructor(e,t){this.dialogService=e,this.boardService=t,this.readonly=!1,this.cellChange=new d.vpe,this.boardChange=new d.vpe}ngOnChanges(){}selectCell(e){this.cellChange.emit(e)}showBoard(e){this.boardChange.emit(e)}selectHeaderImage(){this.dialogService.openMediaLibrary({sources:["user_media"],allowClear:!!this.board.header_media}).afterClosed().subscribe(e=>{e&&(e.id?this.setBoardHeaderMedia(e):this.clearBoardHeaderMedia())})}setBoardHeaderMedia(e){this.board.header_media=e,this.board.header_media_id=e.id,this.boardService.update(this.board).subscribe()}clearBoardHeaderMedia(){this.board.header_media=null,this.board.header_media_id=null,this.boardService.update(this.board).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(Fe.x),d.Y36(s.$))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-board-detail"]],inputs:{board:"board",cell:"cell",readonly:"readonly"},outputs:{cellChange:"cellChange",boardChange:"boardChange"},features:[d.TTD],decls:1,vars:1,consts:function(){let e,t,a;return e="Ajouter une image d\u2019en-t\xEAte",t="Acc\xE9dez \xE0 Linked Board",a="Acc\xE9dez \xE0 Linked Board",[[4,"ngIf"],["fxLayout","row","fxLayoutGap","20px","fxLayoutAlign","center center",1,"mb-3","board-header"],["fxFlex","33","fxLayout","row"],[3,"ngSwitch"],["mat-button","","mat-stroked-button","",3,"p-0","click",4,"ngSwitchCase"],[4,"ngSwitchCase"],["fxFlex","33",1,"text-center","board-title"],["fxFlex","33",1,"text-right"],["rowHeight","11.85rem","gutterSize","1rem",3,"cols"],["tabindex","0","gaCategory","CellEditor","gaEvent","open",3,"background-color","outline-color","selected","outlined","click","keyup.enter",4,"ngFor","ngForOf"],["mat-button","","mat-stroked-button","",3,"click"],[3,"src",4,"ngIf"],[3,"src"],e,["tabindex","0","gaCategory","CellEditor","gaEvent","open",3,"click","keyup.enter"],["fxLayout","column","fxLayoutAlign","space-between stretch","fxFlex","","id","cellBox","class","tile-body",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between stretch","fxFlex","","id","cellBoxRow","class","tile-body",4,"ngIf"],["fxLayout","column","fxLayoutAlign","space-between stretch","fxFlex","","id","cellBox",1,"tile-body"],["fxFlexOrder","2"],[3,"adaptable","cell","image",4,"ngIf"],["class","placeholder",4,"ngIf"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center",3,"fxFlexOrder"],["mat-icon-button","",3,"visibility",4,"ngIf"],["fxFlex","grow",3,"color",4,"ngIf"],["mat-icon-button","","matTooltip",t,3,"visibility","click",4,"ngIf"],[3,"adaptable","cell","image"],[1,"placeholder"],["mat-icon-button",""],["fxFlex","grow"],["mat-icon-button","","matTooltip",t,3,"click"],["fxLayout","row","fxLayoutAlign","space-between stretch","fxFlex","","id","cellBoxRow",1,"tile-body"],["fxFlex","50","fxFlexOrder","2"],["style","max-width: 100%;",3,"src",4,"ngIf"],["fxFlex","50","fxLayout","column","fxLayoutAlign","space-between center",3,"fxFlexOrder"],["mat-icon-button","","matTooltip",a,3,"click"],[2,"max-width","100%",3,"src"]]},template:function(e,t){1&e&&d.YNc(0,st,13,11,"div",0),2&e&&d.Q6J("ngIf",t.board)},directives:[o.O5,u.xw,u.SQ,u.Wh,u.yH,o.RF,o.n9,Re.Il,o.sg,p.lW,Re.DX,ke.ht,ke.kw,u.r7,je.y,m.Hw,ne.gM],pipes:[o.OU],styles:["mat-grid-tile[_ngcontent-%COMP%]{position:absolute;text-align:center;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);color:#000;background:hsla(0,0%,100%,.1);transition:box-shadow .2s ease-in}mat-grid-tile.outlined[_ngcontent-%COMP%]{outline-offset:-4px;outline-width:4px;outline-style:solid}mat-grid-tile[_ngcontent-%COMP%]:hover{transition-duration:.05s;box-shadow:0 0 8px 3px rgba(186,225,255,.8);cursor:pointer}mat-grid-tile.selected[_ngcontent-%COMP%], mat-grid-tile.selected[_ngcontent-%COMP%]:focus{transition-duration:.2s;box-shadow:0 0 8px 4px #006aba}mat-grid-tile[_ngcontent-%COMP%]:focus{transition-duration:.2s;box-shadow:0 0 5px 3px #bae1ff;outline-style:solid;outline-color:transparent}mat-grid-tile[_ngcontent-%COMP%]   div.tile-body[_ngcontent-%COMP%]{padding:.5rem 1rem}mat-grid-tile[_ngcontent-%COMP%]   mat-icon.placeholder[_ngcontent-%COMP%]{font-size:7rem;height:auto;width:auto;opacity:.1}.board-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:48px}.board-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:46px}.board-header[_ngcontent-%COMP%]   h1.board-title[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}"]}),e})();function ut(e,t){1&e&&d._UZ(0,"app-loading-notice",11)}function pt(e,t){1&e&&d._UZ(0,"app-error-not-found",12)}function ht(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",30),d.TgZ(1,"div",31),d.SDv(2,32),d.qZA(),d.TgZ(3,"button",33),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).copyBoardSet()}),d.TgZ(4,"mat-icon"),d._uU(5,"create"),d.qZA(),d.qZA(),d.qZA()}}function mt(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"app-board-tree",34),d.NdJ("selectionChange",function(t){return d.CHM(e),d.oxw(2).selectBoard(t)})("deleteBoard",function(t){return d.CHM(e),d.oxw(2).deleteBoard(t)})("updateBoard",function(){return d.CHM(e),d.oxw(2).loadBoardSet()}),d.qZA()}if(2&e){const e=d.oxw(2);d.Q6J("boardSet",e.boardSet)("boards",e.boardSet.boards)("selectedBoard",e.board)}}function gt(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"mat-sidenav",35,36),d.NdJ("opened",function(){return d.CHM(e),d.oxw(2).disableCellEditorAnimations=!1})("closed",function(){return d.CHM(e),d.oxw(2).disableCellEditorAnimations=!0})("closedStart",function(){return d.CHM(e),d.oxw(2).selectedCell=null}),d.TgZ(2,"app-cell-editor",37),d.NdJ("closed",function(){return d.CHM(e),d.MAs(1).close()})("cellLinkedToBoard",function(){return d.CHM(e),d.oxw(2).boardTree.rebuildTree()}),d.qZA(),d.qZA()}if(2&e){const e=d.oxw(2);d.Q6J("opened",e.selectedCell)("mode",e.cellEditorMobileQuery.matches?"over":"side"),d.xp6(2),d.Q6J("boardSet",e.boardSet)("board",e.board)("cell",e.selectedCell)("@.disabled",e.disableCellEditorAnimations)}}function ft(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",13),d.TgZ(1,"mat-sidenav-container",14),d.TgZ(2,"mat-sidenav",15,16),d.TgZ(4,"div",17),d.TgZ(5,"div",18),d.TgZ(6,"div",19),d.NdJ("dblclick",function(){return d.CHM(e),d.oxw().editBoardSet()}),d.TgZ(7,"h3",20),d._uU(8),d.qZA(),d.TgZ(9,"button",21),d.NdJ("click",function(e){return e.stopPropagation()}),d.TgZ(10,"mat-icon"),d._uU(11,"more_vert"),d.qZA(),d.qZA(),d.qZA(),d.YNc(12,ht,6,0,"div",22),d.qZA(),d.YNc(13,mt,1,3,"app-board-tree",23),d.TgZ(14,"div",24),d.TgZ(15,"div"),d.TgZ(16,"button",25),d.NdJ("click",function(){return d.CHM(e),d.oxw().addBoard()}),d.TgZ(17,"mat-icon"),d._uU(18,"add"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(19,gt,3,6,"mat-sidenav",26),d.TgZ(20,"mat-sidenav-content"),d.TgZ(21,"app-board-detail",27),d.NdJ("cellChange",function(t){return d.CHM(e),d.oxw().selectedCell=t})("boardChange",function(t){return d.CHM(e),d.oxw().selectBoard(t)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(22,"div",28),d.TgZ(23,"button",29),d.NdJ("click",function(){return d.CHM(e),d.MAs(3).toggle()}),d.TgZ(24,"mat-icon"),d._uU(25,"chevron_right"),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=d.MAs(3),t=d.oxw(),a=d.MAs(4);d.ekj("example-is-mobile",t.boardTreeMobileQuery.matches),d.xp6(1),d.Q6J("autosize",!0),d.xp6(1),d.Q6J("mode",t.boardTreeMobileQuery.matches?"over":"side")("fixedInViewport",t.boardTreeMobileQuery.matches)("opened",!t.boardTreeMobileQuery.matches),d.xp6(6),d.Oqu(t.boardSet.name),d.xp6(1),d.Q6J("matMenuTriggerFor",a),d.xp6(3),d.Q6J("ngIf",null==t.boardSet?null:t.boardSet.readonly),d.xp6(1),d.Q6J("ngIf",t.boardSet),d.xp6(3),d.Q6J("disabled",null==t.boardSet?null:t.boardSet.readonly),d.xp6(3),d.Q6J("ngIf",!(null!=t.boardSet&&t.boardSet.readonly)),d.xp6(2),d.Q6J("board",t.board)("cell",t.selectedCell)("readonly",t.boardSet.readonly),d.xp6(1),d.ekj("open",e.opened),d.xp6(1),d.Q6J("matTooltip",(e.opened?"Hide":"Show")+" Boards Panel")}}let xt=(()=>{class e{constructor(e,t,a,o,i,n,r,c,l,d,s){this.boardSetService=a,this.boardService=o,this.cellService=i,this.hotkeysService=n,this.toolbarService=r,this.dialogService=c,this.dialog=l,this.route=d,this.router=s,this.loadingError=!1,this.disableCellEditorAnimations=!0,this.hotkeys=[],this.mobileQueryListener=()=>e.detectChanges(),this.boardTreeMobileQuery=t.matchMedia("(max-width: 900px)"),this.boardTreeMobileQuery.addListener(this.mobileQueryListener),this.cellEditorMobileQuery=t.matchMedia("(max-width: 1400px)"),this.cellEditorMobileQuery.addListener(this.mobileQueryListener)}ngOnInit(){this.loading=!0,this.getBoardSet().subscribe(e=>{this.boardSet.readonly||this.boardSetService.touch(this.boardSet).subscribe(),this.boardSet.boards.length>0&&this.selectBoard(this.boardSet.boards[0])},e=>null,()=>this.loading=!1),this.toolbarService.setButtons([{text:"Board Sets",icon:"arrow_back",action:()=>this.router.navigate(["/","boardsets"])}],[{tooltip:"Keyboard Shortcuts",icon:"keyboard",action:()=>this.hotkeysService.cheatSheetToggle.next()}]),this.hotkeys.push(this.hotkeysService.add(new n.qm(["ctrl+backspace","command+backspace"],e=>(this.router.navigate(["/","boardsets"]),!1),void 0,"Return to Main Menu"))),this.hotkeys.push(this.hotkeysService.add(new n.qm(["ctrl+s","command+s"],e=>(this.boardSet&&this.editBoardSet(),!1),void 0,"Edit Board Set"))),this.hotkeys.push(this.hotkeysService.add(new n.qm(["ctrl+enter","command+enter"],e=>(this.addBoard(),!1),void 0,"Add Board"))),this.hotkeys.push(this.hotkeysService.add(new n.qm(["ctrl+e","command+e"],e=>(this.board&&this.editBoard(this.board),!1),void 0,"Edit Current Board"))),this.hotkeys.push(this.hotkeysService.add(new n.qm(["ctrl+del","command+del"],e=>(this.board&&this.deleteBoard(this.board),!1),void 0,"Delete Current Board"))),this.hotkeys.push(this.hotkeysService.add(new n.qm(["del"],e=>(this.selectedCell&&this.cellEditor.clearCell(),!1),void 0,"Clear Selected Cell")))}ngOnDestroy(){this.boardTreeMobileQuery.removeListener(this.mobileQueryListener),this.toolbarService.clearButtons(),[].concat(...this.hotkeys).map(e=>this.hotkeysService.remove(e))}getBoardSet(){return this.loadingError=!1,this.loading=!0,this.boardSetService.get(this.route.snapshot.paramMap.get("id"),"boards boards.cells boards.cells.picto boards.cells.picto.image boards.header_media").pipe((0,z.K)(e=>(this.loadingError=!0,this.loading=!1,(0,L._)(e))),(0,U.U)(e=>(this.loading=!1,this.boardSet=e)))}loadBoardSet(){const e=this.board;this.getBoardSet().subscribe(t=>{var a;e&&this.selectBoard(e.id,null===(a=this.selectedCell)||void 0===a?void 0:a.id)})}addBoard(){var e,t,a;if(this.boardSet.readonly)return;if(void 0!==this.currentDialogRef)return;const o=new i.$({name:"Board "+(this.boardSet.boards.length+1),board_set_id:this.boardSet.id,rows:null===(e=this.board)||void 0===e?void 0:e.rows,columns:null===(t=this.board)||void 0===t?void 0:t.columns,captions_position:null===(a=this.board)||void 0===a?void 0:a.captions_position});this.currentDialogRef=this.dialog.open(P,{width:"700px",data:{board:o}}),this.currentDialogRef.afterClosed().subscribe(e=>{this.currentDialogRef=void 0,e&&this.boardService.add(o).subscribe(e=>{this.getBoardSet().subscribe(e=>{this.selectLastBoard()})})})}updateBoardSet(){if(!this.boardSet.readonly)return this.boardSetService.update(this.boardSet)}selectBoard(e,t){this.board="number"==typeof e?this.boardSet.boards.find(t=>t.id===e):e,this.selectedCell="number"==typeof t?this.board.cells.find(e=>e.id===t):void 0}selectLastBoard(){this.boardSet.boards.length>0&&this.selectBoard(this.boardSet.boards[this.boardSet.boards.length-1])}deleteBoard(e){this.boardSet.readonly||void 0===this.currentDialogRef&&this.dialogService.delete({heading:`Delete '${e.name}'?`,content:"This cannot be undone."}).afterClosed().subscribe(t=>{t&&(this.selectBoard(null),this.boardService.delete(e).subscribe(t=>{const a=this.boardSet.boards.indexOf(e);this.boardSet.boards=this.boardSet.boards.filter(t=>t!==e),this.boardSet.boards[a]?this.selectBoard(this.boardSet.boards[a]):this.boardSet.boards[a-1]&&this.selectBoard(this.boardSet.boards[a-1])})),this.currentDialogRef=void 0})}deleteBoardSet(e){this.dialogService.deleteBoardSet(e,{heading:`Delete '${e.name}'? (contains ${e.boards.length} Board${1!==e.boards.length?"s":""})`,content:`The Board Set and ${e.boards.length} Board${1!==e.boards.length?"s":""} will be deleted. This cannot be undone.`}).afterClosed().subscribe(t=>{t&&this.boardSetService.delete(e).subscribe(e=>this.router.navigate(["/","boardsets"]))})}editBoard(e){this.boardSet.readonly||void 0===this.currentDialogRef&&(this.currentDialogRef=this.dialog.open(P,{width:"700px",data:{board:this.board}}),this.currentDialogRef.afterClosed().subscribe(t=>{this.currentDialogRef=void 0,this.boardService.update(e).subscribe()}))}downloadBoard(e){(0,c.saveAs)(new Blob([JSON.stringify(e.toObf(),null,2)],{type:"text/plain;charset=utf-8"}),e.title+".obf")}editBoardSet(){this.boardSet.readonly||void 0===this.currentDialogRef&&(this.currentDialogRef=this.dialog.open($,{width:"300px",data:{boardSet:this.boardSet}}),this.currentDialogRef.afterClosed().subscribe(e=>{e instanceof r.V&&this.boardSetService.update(e).subscribe(),this.currentDialogRef=void 0}))}uploadBoardObf(){void 0===this.currentDialogRef&&(this.currentDialogRef=this.dialog.open(T,{width:"500px",data:{boardSet:this.boardSet}}),this.currentDialogRef.afterClosed().subscribe(e=>{e instanceof i.$&&this.getBoardSet().subscribe(e=>{this.selectLastBoard()}),this.currentDialogRef=void 0}))}downloadBoardSetObz(){this.boardSetService.convertToObz(this.boardSet).then(e=>(0,c.saveAs)(e,this.boardSet.title+".obz"))}generatePdf(){this.updateBoardSet().subscribe(e=>this.router.navigate(["/","boardsets",this.boardSet.id,this.board.id,"pdf"]))}copyBoardSet(){void 0===this.currentDialogRef&&(this.currentDialogRef=this.dialog.open(ee,{width:"300px",data:this.boardSet}),this.currentDialogRef.afterClosed().subscribe(e=>{e instanceof r.V&&this.boardSetService.update(e).subscribe(),this.currentDialogRef=void 0}))}refreshTree(){this.boardTree.rebuildTree()}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(d.sBO),d.Y36(Ue.vx),d.Y36(E.o),d.Y36(s.$),d.Y36(fe),d.Y36(n.tm),d.Y36(Ee.O),d.Y36(Fe.x),d.Y36(l.uw),d.Y36(F.gz),d.Y36(F.F0))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-builder"]],viewQuery:function(e,t){if(1&e&&(d.Gf(ue,5),d.Gf(ze,5)),2&e){let e;d.iGM(e=d.CRH())&&(t.boardTree=e.first),d.iGM(e=d.CRH())&&(t.cellEditor=e.first)}},decls:27,vars:6,consts:function(){let e,t,a,o,i,n,r,c,l,d,s,b;return e="Ensemble de planches",t="Ensemble de planches",a="Ajouter le planche de L\u2019OBF",o="T\xE9l\xE9charger Board Set as OBZ",i="supprimer",n="Propri\xE9t\xE9s",r="Raccourcis clavier",c="Actions de l\u2019ensemble de la carte",l="Ajouter une carte",d="Ajouter une carte",s="Lecture seule",b="Cr\xE9er une copie modifiable",[["class","mt-3","subject",e,4,"ngIf"],["class","container mt-3","subject",t,4,"ngIf"],["class","example-container",3,"example-is-mobile",4,"ngIf"],["matBoardSetMenu","matMenu"],["mat-menu-item","",3,"disabled","click"],a,["mat-menu-item","",3,"click"],o,i,n,["title",r],["subject",e,1,"mt-3"],["subject",t,1,"container","mt-3"],[1,"example-container"],[1,"example-sidenav-container",3,"autosize"],["fixedTopGap","56","id","leftSidebar",3,"mode","fixedInViewport","opened"],["sideNav",""],["fxLayout","column","fxFlex",""],["id","leftSidebarHeaderPanel",1,"mat-elevation-z4"],["fxLayout","row","fxLayoutAlign","space-between center",3,"dblclick"],["id","boardSetName"],["mat-button","","mat-icon-button","","matTooltip",c,"matTooltipPosition","right",3,"matMenuTriggerFor","click"],["fxLayout","row","fxLayoutAlign","space-between center",4,"ngIf"],["fxFlex","grow","style","overflow-y: overlay",3,"boardSet","boards","selectedBoard","selectionChange","deleteBoard","updateBoard",4,"ngIf"],["id","leftSidebarBottomPanel"],["mat-mini-fab","","matTooltip",l,"matTooltipPosition","right","aria-label",d,"color","primary",3,"disabled","click"],["position","end","id","cellEditor",3,"opened","mode","closed","closedStart",4,"ngIf"],[3,"board","cell","readonly","cellChange","boardChange"],["id","leftSidebarToggler"],["mat-mini-fab","","color","primary","matTooltipPosition","right",1,"mat-elevation-z2",3,"matTooltip","click"],["fxLayout","row","fxLayoutAlign","space-between center"],[1,"read-only"],s,["mat-button","","mat-icon-button","","matTooltip",b,"matTooltipPosition","right",3,"click"],["fxFlex","grow",2,"overflow-y","overlay",3,"boardSet","boards","selectedBoard","selectionChange","deleteBoard","updateBoard"],["position","end","id","cellEditor",3,"opened","mode","closed","closedStart"],["cellEditor",""],["fxLayout","column","fxFlex","",3,"boardSet","board","cell","closed","cellLinkedToBoard"]]},template:function(e,t){1&e&&(d.YNc(0,ut,1,0,"app-loading-notice",0),d.YNc(1,pt,1,0,"app-error-not-found",1),d.YNc(2,ft,26,18,"div",2),d.TgZ(3,"mat-menu",null,3),d.TgZ(5,"button",4),d.NdJ("click",function(){return t.uploadBoardObf()}),d.TgZ(6,"mat-icon"),d._uU(7,"note_add"),d.qZA(),d.ynx(8),d.SDv(9,5),d.BQk(),d.qZA(),d.TgZ(10,"button",6),d.NdJ("click",function(){return t.downloadBoardSetObz()}),d.TgZ(11,"mat-icon"),d._uU(12,"save_alt"),d.qZA(),d.ynx(13),d.SDv(14,7),d.BQk(),d.qZA(),d._UZ(15,"mat-divider"),d.TgZ(16,"button",4),d.NdJ("click",function(){return t.deleteBoardSet(t.boardSet)}),d.TgZ(17,"mat-icon"),d._uU(18,"delete"),d.qZA(),d.ynx(19),d.SDv(20,8),d.BQk(),d.qZA(),d.TgZ(21,"button",4),d.NdJ("click",function(){return t.editBoardSet()}),d.TgZ(22,"mat-icon"),d._uU(23,"edit"),d.qZA(),d.ynx(24),d.SDv(25,9),d.BQk(),d.qZA(),d.qZA(),d._UZ(26,"hotkeys-cheatsheet",10)),2&e&&(d.Q6J("ngIf",t.loading),d.xp6(1),d.Q6J("ngIf",t.loadingError),d.xp6(1),d.Q6J("ngIf",t.boardSet),d.xp6(3),d.Q6J("disabled",null==t.boardSet?null:t.boardSet.readonly),d.xp6(11),d.Q6J("disabled",null==t.boardSet?null:t.boardSet.readonly),d.xp6(5),d.Q6J("disabled",null==t.boardSet?null:t.boardSet.readonly))},directives:[o.O5,ie.VK,ie.OP,m.Hw,re.d,n.XM,H.W,He,Ye.TM,Ye.JX,u.xw,u.yH,u.Wh,p.lW,ne.gM,ie.p6,Ye.Rh,bt,ue,ze],styles:[".example-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;top:4rem;bottom:0;left:0;right:0}.example-is-mobile[_ngcontent-%COMP%]   .example-toolbar[_ngcontent-%COMP%]{position:fixed;z-index:2}h1.example-app-name[_ngcontent-%COMP%]{margin-left:8px}.example-sidenav-container[_ngcontent-%COMP%]{flex:1}.example-is-mobile[_ngcontent-%COMP%]   .example-sidenav-container[_ngcontent-%COMP%]{flex:1 0 auto}mat-sidenav#leftSidebar[_ngcontent-%COMP%]{max-width:250px;box-sizing:content-box}mat-sidenav#cellEditor[_ngcontent-%COMP%]{width:355px}app-board-tree[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}app-board-tree[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;margin-left:1px;border-left:1px solid #fff}app-board-tree[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#bbb}app-board-tree[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#888}mat-sidenav-content[_ngcontent-%COMP%]{padding:1rem}#leftSidebarBottomPanel[_ngcontent-%COMP%], #leftSidebarHeaderPanel[_ngcontent-%COMP%]{background-color:#bae1ff}#leftSidebarBottomPanel[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], #leftSidebarHeaderPanel[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:16px 21px 16px 16px}#leftSidebarBottomPanel[_ngcontent-%COMP%]{max-width:249px}#leftSidebarHeaderPanel[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;user-select:none;max-width:250px}#leftSidebarHeaderPanel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;padding-right:16px}.board-toolbar[_ngcontent-%COMP%]{margin:8px 0}#leftSidebarBottomPanel[_ngcontent-%COMP%]{box-shadow:0 -2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);text-align:right}#leftSidebarBottomPanel[_ngcontent-%COMP%], #leftSidebarToggler[_ngcontent-%COMP%]{z-index:2}#leftSidebarBottomPanel[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], #leftSidebarToggler[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:relative;top:-2px}#leftSidebarToggler[_ngcontent-%COMP%]{padding:16px;bottom:0;display:flex;overflow:hidden;position:absolute;left:0}#leftSidebarToggler[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transition:all .5s}#leftSidebarToggler.open[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:scaleX(-1)}#leftSidebarToggler.open[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;color:#006aba}#boardSetName[_ngcontent-%COMP%]{max-width:10vw;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.read-only[_ngcontent-%COMP%]{color:#666;text-transform:uppercase;margin-top:.5rem}"]}),e})();var kt=a(37112),vt=a(75425),Zt=a(23695),Ct=a(27853);a(19861),a(26136),a(97388);let yt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({}),e})(),_t=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[yt,D.si,D.BQ,Ct.Q8],yt,D.BQ]}),e})();var wt=a(40994),Tt=a(19936);const St=[{path:"",component:xt,pathMatch:"full"},{path:"pdf",loadChildren:()=>a.e(555).then(a.bind(a,98555)).then(e=>e.PdfModule)}];let At=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[o.ez,F.Bz.forChild(St),Ze.To,ve.Nh,m.Ps,u.ae,p.ot,J.lN,N.LD,kt.g0,ne.AV,ie.Un,Ye.SJ,ie.Tx,re.t,oe.ie,vt.m,Ae.QW,I.c,Q.u5,g.Cq,Re.N6,l.Is,b._t,Zt.KP,te.dp,_t,wt.p9,n.mb,Tt.be,ke.yz]]}),e})()}}]);